# 数学技巧

由于鱼竿数学底子太弱，所以写了这些东西来记录一些数学技巧

## 数的表示方法

1. 利用质因数分解把一个数转为质数乘积

   $N=p_1^{c_1}p_2^{c_2}p_3^{c_3}p_4^{c_4}p_5^{c_5}……$

   

2. 二进制表示（涉及位运算）每个正整数可以唯一表示为若干指数不重复的2的次幂的和

   $b=c_{k-1}2^{k-1}+c_{k-2}2^{k-2}+c_{k-3}2^{k-3}+……+c_02^0$

   应用：

   1. 快速幂
   2. 位运算
   3. 求方案数，每一位二进制位的选取

## 数学式子的思考

1. 式子的转化
   1. 指数对数
   2. 加减乘除
   3. 左右移动变换
2. 等号的意义
   1. 值的相等
   2. 效果相等
      1. 把同类的运算放到一边
3. 解
   1. 有没有解
      1. 能否被整除
   2. 有多少解
      1. 二进制每位，在什么限制条件下，怎么选每位
      2. 质因数分解，在什么限制条件下，选哪些质因子，选多少
   3. 有没有重复解
      1. k*k：完全平方数
      2. 
4. 限制条件
   1. 题目条件
   2. 数学运算中的式子
5. 式子解决不了的问题，那就暴力枚举啊！想办法缩小枚举范围

## 位数

求x位数

```
double s=log10(x)
int len=s+1
```

求x最左边一位$ans=x/10^{len-1}$

## 对数

指数转化
$lg(x^x)=xlg(x),x=10^{xlg(x)}$
$lg(x^n)=nlg(x),x=10^{nlg(x)}$

乘机转加法防溢出

$ans=lg(x_1*x_2*x_3……x_n)=lg(x_1)+lg(x_2)+lg(x_3)+……lg(x_n)$




## 质数

1. 1到n中大约（可以用来估算时间复杂度和开空间）有$\frac{n}{ln(n)}$个质数
2. 质数的倍数一定是合数
3. 若一个正整数N为合数，则存在一个能整除N的数T，其中$2<=T<=\sqrt{N}$
4. 唯一分解定理：$N=p_1^{c_1}p_2^{c_2}p_3^{c_3}p_4^{c_4}p_5^{c_5}……$
5. 约数个数$(c_1+1)(c_2+1)(c_3+1)(c_4+1)……$
6. 约数之和$(p_1^0+p_1^1+……+p_1^{c_1})*……*(p_k^0+p_k^1+p_k^2+……+p_k^{c_k})$
7. 若p为质数：p=1*p唯一表示，可以把1和p对应p相关的式子

## 递推式子

### 打表技巧

#### 强行凑数逆推

常见递推式子有,打表找规律把系数逆推出来
$
f[n]=af[n-1]+bf[n-2]+cf[n-3]……
$
$
f[n]=a+bn+cn^2+dn^3……
$

#### 分类讨论

1. 分奇数偶数讨论
2. 把比较前面的情况特殊化（所以逆推凑数的时候n选稍微大一些）



## GCD/LCM

1. $gcd(a,b)lcm(a,b)=ab$
   lcm问题可以转化为gcd问题
   若a,b互质$gcd(a,b)=1$,则$lcm(a,b)=ab$

2. gcd是“最大”“公约数”
   最大：包含了所有公约数，你可以从gcd中提取出所有公约数（通过质因数分解选数）

   公约数：gcd是a，b，lcm（a,b)约数

3. $gcd(ma,mb)=mgcd(a,b)$

4. $m=gcd(a,b)则gcd(a/m,b/m)=gcd(a,b)/m=1$
   **可以顺便知道$a/m$和$b/m$互质即，$gcd(a,b)=k_1a=k_2b$，$k_1,k_2$互质,这个经常用**

5. $gcd(a,lcm(b,c))=lcm(gcd(a,b),gcd(a,c))$

   ![image-20201225233541804](C:\Users\zsl\AppData\Roaming\Typora\typora-user-images\image-20201225233541804.png)

6. $lcm(a,gcd(b,c))=gcd(lcm(a,b),lcm(a,c))$

   ![image-20201225233926711](C:\Users\zsl\AppData\Roaming\Typora\typora-user-images\image-20201225233926711.png)

   这里有个想法，对于5，6这种只有lcm和gcd的等式是否可以用韦恩图来解释大部分等式，因为没有加减乘除来改变他们的集合

7. $gcd(a,b)=gcd(b,a-b)=gcd(a,a-b)$

   1. 推广①：$gcd(a+mb,b)=gcd(a,b)$
      **gcd线性封闭**

   2. 推广②：$gcd(x,y,z)=gcd(x,y-x,z-y)$

   3. 推广③：$gcd(a_1,a_2,a_3……a_n)=gcd(a_1,gcd(a_2,a_3……a_n))$

   4. 推广④：$gcd(a_1+t,a_2+t,a_3+t……,a_n+t)=gcd(a_1+t,gcd(a_2-a_1,a_3-a_2,……a_n-a_{n-1}))$

      可以利用差分序列+线段树做gcd的区间修改和单点查询

   **Tip：在使用这一性质的时候，可能需要对a，b交换或者排序来保证a-b不出现负数的情况（当然直接abs也ok)**

8. $gcd(a,b)=gcd(a,a mod b)$
   欧几里得辗转相除法原理

9. $gcd(x+y,lcm(x,y))=gcd(x,y)$

10. 不等式(可以用来缩小枚举范围)

   1. $lcm(a,b)>=max(a,b)$
   2. $gcd(a,b)<=min(a,b)$

11. 质因数分解
      $a=p_1^{c_1}p_2^{c_2}p_3^{c_3}……p_n^{c_n}$
      $b=p_1^{r_1}p_2^{r_2}p_3^{r_3}……p_n^{r_n}$
      $lcm(a,b)=p_1^{max(c_1,r_1)}p_2^{max(c_2,r_2)}……p_n^{max(c_n,r_n)}$
      $gcd(a,b)=p_1^{min(c_1,r_1)}p_2^{min(c_2,r_2)}……p_n^{min(c_n,r_n)}$

综上我们可以到一个等式链

$gcd(x,y)=\frac {lcm(x,y)}{xy}=gcd(a+mb,b)=gcd(a,b+ka)=gcd(x+y,lcm(x,y))=k_1x=k_2y(k_1,k_2互质)$

## 互质

1. a,b互质$gcd(a,b)=1$
2. 1与任意非0互质
3. 2与任意奇数互质
4. 相邻的两个非0自然数互质
5. 相邻两个奇数互质
6. 任意两个质数是互质数
7. 一个质数一个合数，合数不是质数的倍数，一定互质
8. 构造两两不互质
   1. $2\times1,2\times2,2\times3,2\times4……$增速慢
   2. $2\times3,3\times5,5\times7,7\times9……$增速快
9. 欧拉函数：$\varphi(x)=N(1-\frac1{p_1})(1-\frac1{p_2})(1-\frac1{p_3})……(1-\frac1{p_k})\\$